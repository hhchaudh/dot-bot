'use strict';
let setLegendAttributes = (isNavigable, isPowerup, requiredPowerups, numPowerupsRequired, name) => {
    return {
        isNavigable,
        isPowerup,
        requiredPowerups,
        numPowerupsRequired,
        name
    };
};

let moveGuide = {
    0 : -1,
    1 : -1,
    2 : 1,
    3 : 1
};

let mapLegend = {
    100 : setLegendAttributes(true, false, null, null, "start"),
    0 : setLegendAttributes(true, false, null, null, "open"),
    1 : setLegendAttributes(false, false, [2], 1, "barrier"),
    2 : setLegendAttributes(true, true, null, null, "ladder"),
    99 : setLegendAttributes(true, false, null, null, "end"),
    3 : setLegendAttributes(false, false, [5], 1, "tree"),
    4 : setLegendAttributes(false, false, [6], 1, "water"),
    5 : setLegendAttributes(true, true, null, null, "ax"),
    6 : setLegendAttributes(true, true, null, null, "boat")
};

let mapObjArray = [ { map:
        [ [ 100, 0, 0, 0, 3, 0, 3, 3, 0, 3 ],
            [ 0, 3, 3, 0, 3, 0, 0, 0, 3, 0 ],
            [ 3, 0, 0, 0, 3, 0, 3, 0, 0, 3 ],
            [ 0, 3, 3, 0, 3, 0, 3, 0, 3, 0 ],
            [ 0, 0, 3, 0, 3, 0, 3, 0, 0, 3 ],
            [ 0, 0, 0, 0, 3, 0, 3, 99, 3, 0 ],
            [ 0, 0, 3, 0, 3, 0, 3, 0, 0, 3 ],
            [ 0, 3, 3, 0, 0, 0, 0, 3, 3, 0 ],
            [ 0, 0, 3, 3, 3, 3, 0, 0, 0, 0 ],
            [ 3, 0, 0, 0, 5, 0, 3, 3, 0, 0 ] ],
    startPoint: [ 0, 0 ] },
    { map:
            [ [ 0, 0, 1, 0, 0, 1, 0, 1, 1, 0 ],
                [ 1, 1, 1, 1, 1, 0, 0, 0, 0, 0 ],
                [ 0, 0, 0, 0, 99, 1, 0, 1, 0, 0 ],
                [ 1, 1, 0, 1, 1, 1, 1, 0, 1, 1 ],
                [ 0, 1, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 2, 0, 1, 1, 1, 1, 0, 1, 1, 0 ],
                [ 0, 1, 0, 0, 0, 0, 0, 1, 0, 1 ],
                [ 0, 1, 1, 0, 1, 1, 1, 0, 0, 1 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 100, 0 ],
                [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 ] ],
        startPoint: [ 8, 8 ] },
    { map:
            [ [ 0, 0, 4, 0, 4, 4, 0, 4, 0, 0 ],
                [ 0, 4, 4, 0, 0, 0, 0, 0, 4, 0 ],
                [ 0, 0, 0, 0, 0, 4, 0, 0, 0, 0 ],
                [ 4, 0, 4, 0, 4, 0, 4, 0, 4, 4 ],
                [ 0, 0, 4, 4, 4, 0, 99, 0, 0, 0 ],
                [ 4, 0, 0, 0, 4, 0, 4, 4, 4, 0 ],
                [ 0, 0, 4, 0, 4, 0, 4, 0, 0, 4 ],
                [ 0, 4, 4, 100, 4, 4, 4, 4, 4, 0 ],
                [ 0, 0, 4, 0, 4, 0, 0, 0, 4, 4 ],
                [ 0, 4, 4, 0, 0, 0, 4, 0, 6, 0 ] ],
        startPoint: [ 7, 3 ] },
    { map:
            [ [ 0, 1, 0, 2, 0, 1, 1, 0, 1, 0 ],
                [ 0, 0, 0, 1, 0, 1, 0, 0, 1, 1 ],
                [ 1, 1, 0, 1, 0, 1, 1, 100, 1, 0 ],
                [ 0, 0, 0, 1, 0, 0, 0, 0, 0, 0 ],
                [ 1, 0, 0, 1, 1, 0, 0, 1, 0, 1 ],
                [ 0, 0, 0, 0, 0, 0, 0, 1, 0, 1 ],
                [ 0, 1, 1, 1, 1, 1, 1, 0, 1, 1 ],
                [ 0, 0, 0, 0, 0, 0, 99, 0, 0, 0 ],
                [ 0, 0, 0, 0, 1, 0, 1, 1, 1, 0 ],
                [ 1, 0, 1, 0, 0, 1, 0, 1, 0, 0 ] ],
        startPoint: [ 2, 7 ] },
    { map:
            [ [ 0, 2, 1, 0, 1, 0, 0, 1, 0, 0 ],
                [ 0, 1, 0, 0, 0, 0, 1, 0, 0, 1 ],
                [ 0, 1, 100, 1, 0, 1, 1, 1, 0, 0 ],
                [ 0, 1, 0, 1, 1, 0, 99, 0, 0, 1 ],
                [ 0, 0, 0, 1, 1, 1, 1, 1, 0, 1 ],
                [ 1, 1, 0, 1, 0, 0, 0, 0, 0, 0 ],
                [ 0, 1, 0, 1, 0, 0, 1, 0, 1, 0 ],
                [ 0, 0, 0, 1, 0, 1, 0, 1, 0, 0 ],
                [ 0, 1, 0, 0, 0, 0, 0, 1, 0, 1 ],
                [ 1, 0, 1, 0, 0, 1, 0, 0, 0, 0 ] ],
        startPoint: [ 2, 2 ] },
    { map:
            [ [ 0, 2, 1, 1, 0, 0, 0, 0, 0, 0 ],
                [ 0, 0, 1, 1, 0, 1, 1, 0, 0, 0 ],
                [ 100, 0, 1, 1, 0, 1, 1, 99, 0, 0 ],
                [ 0, 0, 1, 1, 0, 1, 1, 0, 0, 0 ],
                [ 1, 0, 0, 1, 0, 1, 1, 0, 0, 0 ],
                [ 1, 0, 0, 0, 0, 1, 1, 0, 0, 0 ],
                [ 1, 0, 0, 0, 0, 1, 1, 0, 0, 0 ],
                [ 1, 0, 1, 1, 0, 1, 1, 0, 0, 0 ],
                [ 1, 0, 0, 0, 0, 1, 1, 0, 0, 0 ],
                [ 1, 0, 0, 0, 0, 1, 1, 0, 0, 0 ] ],
        startPoint: [ 2, 0 ] },
    { map:
            [ [ 3, 0, 0, 0, 0, 0, 0, 3, 0, 100 ],
                [ 0, 0, 3, 0, 0, 0, 3, 0, 3, 0 ],
                [ 0, 3, 3, 3, 0, 3, 3, 0, 3, 0 ],
                [ 0, 3, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 5, 3, 0, 3, 3, 3, 3, 3, 3, 3 ],
                [ 0, 3, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 3, 0, 0, 3, 3, 3, 3, 3, 0, 3 ],
                [ 3, 0, 3, 0, 99, 0, 0, 0, 0, 3 ],
                [ 0, 0, 3, 0, 3, 0, 3, 0, 3, 0 ],
                [ 0, 0, 0, 3, 0, 3, 0, 3, 0, 3 ] ],
        startPoint: [ 0, 9 ] },
    { map:
            [ [ 0, 0, 3, 3, 0, 5, 0, 0, 0, 3 ],
                [ 0, 0, 0, 0, 3, 3, 3, 3, 0, 0 ],
                [ 0, 3, 3, 0, 0, 0, 0, 3, 3, 0 ],
                [ 3, 0, 0, 3, 0, 3, 0, 3, 0, 0 ],
                [ 0, 3, 99, 3, 0, 3, 0, 0, 0, 0 ],
                [ 3, 0, 0, 3, 0, 3, 0, 3, 0, 0 ],
                [ 0, 3, 0, 3, 0, 3, 0, 3, 3, 0 ],
                [ 3, 0, 0, 3, 0, 3, 0, 0, 0, 3 ],
                [ 0, 3, 0, 0, 0, 3, 0, 3, 3, 0 ],
                [ 3, 0, 3, 3, 0, 3, 0, 0, 0, 100 ] ],
        startPoint: [ 9, 9 ] },
    { map:
            [ [ 3, 0, 3, 0, 3, 0, 3, 0, 0, 0 ],
                [ 0, 3, 0, 3, 0, 3, 0, 3, 0, 0 ],
                [ 3, 0, 0, 0, 0, 99, 0, 3, 0, 3 ],
                [ 3, 0, 3, 3, 3, 3, 3, 0, 0, 3 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 3, 0 ],
                [ 3, 3, 3, 3, 3, 3, 3, 0, 3, 5 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 3, 0 ],
                [ 0, 3, 0, 3, 3, 0, 3, 3, 3, 0 ],
                [ 0, 3, 0, 3, 0, 0, 0, 3, 0, 0 ],
                [ 100, 0, 3, 0, 0, 0, 0, 0, 0, 3 ] ],
        startPoint: [ 9, 0 ] },
    { map:
            [ [ 1, 0, 0, 0, 2, 0, 1, 0, 1, 0 ],
                [ 1, 0, 1, 1, 0, 1, 1, 0, 1, 0 ],
                [ 1, 0, 1, 0, 1, 0, 0, 0, 1, 1 ],
                [ 1, 0, 0, 0, 1, 0, 1, 0, 1, 0 ],
                [ 1, 0, 1, 0, 1, 0, 1, 99, 1, 0 ],
                [ 1, 0, 1, 0, 1, 0, 1, 1, 0, 1 ],
                [ 1, 0, 1, 0, 0, 0, 1, 0, 0, 0 ],
                [ 1, 0, 0, 1, 1, 0, 0, 1, 0, 1 ],
                [ 1, 100, 0, 0, 1, 0, 1, 0, 0, 1 ],
                [ 0, 0, 1, 1, 0, 0, 1, 0, 0, 0 ] ],
        startPoint: [ 8, 1 ] },
    { map:
            [ [ 0, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
                [ 0, 100, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 1, 0, 0, 1, 1, 1, 0, 1, 1, 0 ],
                [ 1, 0, 1, 0, 0, 0, 0, 0, 1, 0 ],
                [ 0, 1, 1, 0, 1, 1, 1, 1, 0, 2 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 1, 0 ],
                [ 1, 1, 0, 1, 1, 1, 1, 0, 1, 1 ],
                [ 0, 0, 1, 0, 1, 99, 0, 0, 0, 0 ],
                [ 0, 0, 0, 0, 0, 1, 1, 1, 1, 1 ],
                [ 0, 1, 1, 0, 1, 0, 0, 1, 0, 0 ] ],
        startPoint: [ 1, 1 ] },
    { map:
            [ [ 0, 0, 0, 1, 0, 0, 1, 1, 0, 0 ],
                [ 1, 0, 0, 1, 0, 1, 0, 0, 100, 1 ],
                [ 1, 0, 1, 0, 0, 1, 1, 0, 0, 1 ],
                [ 0, 0, 0, 1, 0, 0, 0, 1, 0, 1 ],
                [ 1, 0, 1, 1, 0, 1, 0, 1, 0, 1 ],
                [ 0, 1, 99, 1, 0, 1, 0, 1, 0, 1 ],
                [ 0, 1, 0, 1, 0, 1, 0, 0, 0, 1 ],
                [ 1, 1, 0, 0, 0, 1, 0, 1, 0, 1 ],
                [ 0, 1, 0, 1, 1, 0, 1, 1, 0, 1 ],
                [ 0, 1, 0, 1, 0, 2, 0, 0, 0, 1 ] ],
        startPoint: [ 1, 8 ] },
    { map:
            [ [ 0, 0, 0, 0, 4, 0, 4, 0, 0, 0 ],
                [ 4, 0, 4, 0, 0, 0, 0, 0, 4, 0 ],
                [ 4, 4, 4, 4, 0, 4, 4, 0, 4, 4 ],
                [ 0, 0, 100, 0, 0, 4, 0, 0, 0, 0 ],
                [ 0, 4, 4, 4, 4, 4, 4, 0, 0, 4 ],
                [ 0, 0, 4, 0, 0, 0, 0, 4, 0, 4 ],
                [ 4, 0, 4, 4, 4, 99, 4, 0, 0, 0 ],
                [ 0, 0, 4, 0, 4, 0, 0, 0, 0, 4 ],
                [ 6, 4, 4, 0, 4, 0, 4, 0, 4, 0 ],
                [ 0, 4, 0, 4, 0, 0, 4, 0, 0, 0 ] ],
        startPoint: [ 3, 2 ] },
    { map:
            [ [ 0, 6, 0, 4, 0, 0, 0, 4, 4, 0 ],
                [ 4, 4, 0, 0, 0, 4, 0, 4, 0, 0 ],
                [ 0, 4, 4, 4, 4, 4, 100, 4, 4, 0 ],
                [ 4, 0, 0, 4, 0, 4, 0, 4, 0, 0 ],
                [ 0, 4, 4, 4, 0, 4, 0, 0, 0, 4 ],
                [ 0, 0, 0, 99, 0, 4, 4, 4, 0, 0 ],
                [ 4, 4, 0, 4, 0, 4, 0, 4, 0, 4 ],
                [ 0, 0, 0, 0, 4, 0, 0, 0, 0, 0 ],
                [ 0, 4, 0, 0, 0, 0, 0, 4, 4, 0 ],
                [ 0, 0, 4, 0, 4, 4, 0, 4, 0, 0 ] ],
        startPoint: [ 2, 6 ] },
    { map:
            [ [ 0, 0, 0, 4, 0, 0, 4, 0, 4, 0 ],
                [ 0, 4, 0, 4, 0, 4, 0, 4, 4, 6 ],
                [ 4, 0, 0, 0, 0, 4, 0, 4, 0, 0 ],
                [ 0, 0, 0, 4, 99, 4, 4, 4, 0, 4 ],
                [ 4, 0, 4, 0, 0, 0, 0, 4, 0, 0 ],
                [ 4, 0, 0, 4, 4, 4, 4, 4, 4, 0 ],
                [ 0, 0, 0, 0, 4, 0, 0, 100, 0, 0 ],
                [ 4, 4, 0, 4, 4, 0, 4, 4, 4, 4 ],
                [ 0, 4, 0, 0, 0, 0, 0, 4, 0, 4 ],
                [ 0, 0, 0, 4, 0, 4, 0, 0, 0, 0 ] ],
        startPoint: [ 6, 7 ] },
    { map:
            [ [ 1, 0, 0, 0, 0, 1, 0, 1, 0, 0 ],
                [ 0, 0, 0, 1, 0, 0, 0, 1, 0, 1 ],
                [ 1, 0, 0, 1, 0, 0, 0, 0, 0, 0 ],
                [ 0, 0, 0, 1, 0, 1, 1, 1, 1, 2 ],
                [ 0, 1, 0, 1, 0, 1, 0, 0, 0, 0 ],
                [ 1, 0, 0, 1, 0, 0, 0, 1, 1, 1 ],
                [ 0, 1, 99, 1, 0, 0, 0, 1, 0, 1 ],
                [ 1, 1, 0, 0, 1, 1, 0, 100, 0, 0 ],
                [ 0, 1, 0, 1, 0, 0, 0, 1, 1, 1 ],
                [ 0, 0, 0, 1, 1, 1, 0, 0, 1, 0 ] ],
        startPoint: [ 7, 7 ] },
    { map:
            [ [ 0, 0, 1, 0, 1, 0, 0, 1, 0, 1 ],
                [ 0, 1, 1, 1, 0, 1, 0, 0, 0, 0 ],
                [ 0, 0, 0, 99, 0, 0, 0, 0, 0, 0 ],
                [ 1, 1, 0, 1, 1, 1, 1, 1, 1, 0 ],
                [ 1, 0, 1, 0, 0, 0, 0, 0, 0, 0 ],
                [ 1, 0, 1, 0, 0, 1, 1, 0, 0, 1 ],
                [ 0, 0, 0, 0, 0, 0, 1, 0, 0, 0 ],
                [ 0, 1, 100, 1, 1, 0, 1, 0, 1, 1 ],
                [ 1, 1, 0, 0, 1, 0, 1, 0, 0, 0 ],
                [ 0, 1, 0, 1, 1, 0, 2, 0, 1, 0 ] ],
        startPoint: [ 7, 2 ] },
    { map:
            [ [ 0, 1, 0, 0, 1, 1, 1, 0, 0, 0 ],
                [ 1, 1, 1, 0, 0, 0, 1, 0, 1, 0 ],
                [ 0, 0, 100, 0, 1, 1, 0, 0, 1, 1 ],
                [ 1, 0, 1, 0, 0, 0, 1, 99, 1, 0 ],
                [ 1, 1, 1, 0, 0, 0, 1, 0, 0, 1 ],
                [ 0, 0, 0, 0, 1, 0, 1, 0, 1, 0 ],
                [ 2, 1, 1, 1, 1, 0, 1, 0, 0, 0 ],
                [ 0, 0, 0, 0, 0, 0, 1, 0, 0, 1 ],
                [ 1, 0, 1, 0, 0, 0, 1, 0, 0, 0 ],
                [ 0, 0, 1, 0, 1, 0, 0, 0, 0, 1 ] ],
        startPoint: [ 2, 2 ] },
    { map:
            [ [ 1, 0, 0, 0, 1, 0, 0, 0, 0, 0 ],
                [ 0, 1, 0, 1, 1, 0, 1, 1, 1, 2 ],
                [ 1, 0, 0, 0, 0, 0, 0, 100, 0, 1 ],
                [ 0, 0, 1, 1, 1, 1, 1, 1, 0, 0 ],
                [ 0, 0, 0, 0, 0, 1, 1, 0, 0, 1 ],
                [ 1, 0, 1, 0, 0, 1, 0, 1, 0, 0 ],
                [ 0, 0, 0, 1, 0, 1, 99, 1, 1, 0 ],
                [ 0, 1, 1, 0, 0, 1, 0, 1, 0, 1 ],
                [ 0, 0, 0, 1, 0, 0, 0, 0, 0, 0 ],
                [ 0, 1, 0, 0, 0, 1, 1, 0, 1, 0 ] ],
        startPoint: [ 2, 7 ] },
    { map:
            [ [ 0, 0, 0, 0, 1, 0, 0, 1, 0, 1 ],
                [ 1, 0, 1, 0, 0, 0, 0, 0, 1, 0 ],
                [ 0, 0, 1, 0, 1, 0, 1, 0, 0, 0 ],
                [ 0, 1, 0, 1, 0, 0, 1, 0, 1, 0 ],
                [ 0, 0, 0, 0, 0, 0, 1, 0, 1, 1 ],
                [ 1, 0, 1, 1, 1, 1, 1, 0, 0, 0 ],
                [ 1, 0, 0, 99, 0, 1, 1, 0, 1, 0 ],
                [ 0, 0, 1, 1, 1, 0, 1, 100, 1, 0 ],
                [ 1, 0, 0, 1, 0, 0, 0, 0, 1, 0 ],
                [ 0, 0, 1, 0, 0, 1, 0, 1, 2, 0 ] ],
        startPoint: [ 7, 7 ] },
    { map:
            [ [ 0, 1, 0, 1, 1, 0, 0, 0, 1, 0 ],
                [ 0, 0, 0, 0, 0, 0, 1, 0, 0, 0 ],
                [ 1, 0, 1, 0, 1, 0, 0, 1, 1, 0 ],
                [ 0, 1, 1, 99, 1, 0, 1, 0, 0, 0 ],
                [ 0, 0, 1, 0, 1, 0, 0, 1, 0, 1 ],
                [ 1, 0, 0, 1, 1, 0, 0, 0, 0, 0 ],
                [ 0, 0, 1, 1, 1, 1, 1, 1, 0, 0 ],
                [ 1, 0, 100, 0, 0, 0, 0, 0, 0, 1 ],
                [ 2, 1, 1, 1, 0, 1, 1, 0, 1, 0 ],
                [ 0, 0, 0, 0, 0, 1, 0, 0, 0, 1 ] ],
        startPoint: [ 7, 2 ] },
    { map:
            [ [ 1, 1, 1, 1, 1, 1, 0, 100, 0, 0 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 2 ],
                [ 0, 0, 1, 0, 0, 0, 1, 1, 1, 1 ],
                [ 0, 0, 1, 0, 0, 1, 1, 1, 1, 1 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 ],
                [ 1, 1, 1, 1, 1, 1, 1, 1, 1, 0 ],
                [ 0, 0, 0, 0, 0, 0, 0, 99, 0, 0 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ] ],
        startPoint: [ 0, 7 ] },
    { map:
            [ [ 0, 0, 0, 1, 1, 0, 0, 0, 0, 1 ],
                [ 0, 0, 0, 1, 1, 0, 0, 0, 0, 1 ],
                [ 0, 0, 0, 1, 1, 0, 1, 1, 0, 1 ],
                [ 0, 0, 0, 1, 1, 0, 0, 0, 0, 1 ],
                [ 0, 0, 0, 1, 1, 0, 0, 0, 0, 1 ],
                [ 0, 0, 0, 1, 1, 0, 1, 0, 0, 1 ],
                [ 0, 0, 0, 1, 1, 0, 1, 1, 0, 0 ],
                [ 0, 0, 99, 1, 1, 0, 1, 1, 0, 100 ],
                [ 0, 0, 0, 1, 1, 0, 1, 1, 0, 0 ],
                [ 0, 0, 0, 0, 0, 0, 1, 1, 2, 0 ] ],
        startPoint: [ 7, 9 ] },
    { map:
            [ [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 0, 0, 99, 0, 0, 0, 0, 0, 0, 0 ],
                [ 0, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
                [ 0, 1, 1, 1, 1, 1, 1, 1, 1, 1 ],
                [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 1, 1, 1, 1, 1, 0, 0, 1, 0, 0 ],
                [ 1, 1, 1, 1, 0, 0, 0, 1, 0, 0 ],
                [ 2, 0, 0, 0, 0, 0, 0, 0, 0, 0 ],
                [ 0, 0, 100, 0, 1, 1, 1, 1, 1, 1 ] ],
        startPoint: [ 9, 2 ] } ];


let getNewMap = () => {
    let randomNum = Math.floor(Math.random() * mapObjArray.length);
    return(mapObjArray[randomNum]);
};

let getSecondMap = () => {
    return {
        "map": [
            [0,2,1,1,0,0,0,0,0,0],
            [0,0,1,1,0,1,1,0,0,0],
            [1,0,1,1,0,1,1,99,0,0],
            [0,0,1,1,0,1,1,0,0,0],
            [1,0,0,1,0,1,1,0,0,0],
            [1,0,0,0,0,1,1,100,0,0],
            [1,0,0,0,0,1,1,0,0,0],
            [1,0,1,1,0,1,1,0,0,0],
            [1,0,0,0,0,1,1,0,0,0],
            [1,0,0,0,0,1,1,0,0,0]
        ],
        "startPoint" : [5, 7],
    };
};

let makeMove = (currentPosition, nextMove) => {
    if(nextMove % 2 === 0) {
        currentPosition[1] += moveGuide[nextMove];
    } else {
        currentPosition[0] += moveGuide[nextMove];
    }
};

let isValidMove = (currentPosition, gameMap, player, io) => {
    if(currentPosition[0] < 0 || currentPosition[1] < 0 || currentPosition[0] >= gameMap.length || currentPosition[1] >= gameMap[0].length ) {
        return false;
    }
    console.log(` The current position : ${currentPosition}`);
    let mapPositionValue = gameMap[currentPosition[0]][currentPosition[1]];
    let positionAttributes = mapLegend[mapPositionValue];

    if(mapLegend[mapPositionValue].isNavigable) {
        if(mapLegend[mapPositionValue].isPowerup) {
            player.powerups.push(mapPositionValue);
            io.to(player.room).emit('powerupPickup', {playerName: player.name, powerup: mapPositionValue});
        }
        return true;
    } else {
        if(positionAttributes.requiredPowerups === null) {
            return false;
        }

        let numPowerupsSatisfied = 0;
        let powerupReqMet = false;
        player.powerups.forEach((playerPowerup) => {
            if(positionAttributes.requiredPowerups.findIndex((reqPowerup) => reqPowerup === playerPowerup) !== undefined) {
                numPowerupsSatisfied++;
                if(numPowerupsSatisfied === positionAttributes.numPowerupsRequired) {
                    powerupReqMet = true;
                }
            }
        });

        return powerupReqMet;
    }
};

let isGameWon = (currentPosition, gameMap) => {
    let mapPositionValue = gameMap[currentPosition[0]][currentPosition[1]];

    return (mapLegend[mapPositionValue].name === "end");
};

module.exports = {getNewMap, makeMove, isGameWon, isValidMove, getSecondMap};
